{
  "_id": "2wBJMSUhHTc6CyXVMao7eT",
  "_type": "command",
  "title": "Nextgen Slug Route",
  "slug": "nextgen-slug-route",
  "filePaths": [
    {
      "_key": "1738868072581-yljmao56m",
      "_type": "filePathGroup",
      "id": "path-1738867914866",
      "path": "app/(main)",
      "nodes": [
        {
          "_key": "1738868072581-10rdjzs2n",
          "_type": "treeNode",
          "id": "folder-1738867916026",
          "name": "{{.LowerCaseRouteName}}",
          "type": "folder",
          "code": "",
          "isIndexer": false,
          "children": [
            {
              "_key": "1738908150397-xkzrrdrgg",
              "_type": "treeNode",
              "children": [
                {
                  "_key": "1739451431158-292lr23ew",
                  "_type": "treeNode",
                  "children": [
                    {
                      "_key": "1738908150397-v72fzmkdv",
                      "_type": "treeNode",
                      "children": [],
                      "code": "import type { StructureBuilder } from \"sanity/structure\";\n\nexport const {{.CamelCaseRouteName}}SlugDeskStructure = (S: StructureBuilder) => {\n  return S.listItem()\n    .title(\"{{.PascalCaseRouteName}}\")\n    .schemaType(\"{{.LowerCaseRouteName}}-slug\")\n    .child(\n      S.documentTypeList(\"{{.LowerCaseRouteName}}-slug\")\n        .title(\"{{.PascalCaseRouteName}}\")\n        .defaultOrdering([{ field: \"_createdAt\", direction: \"desc\" }])\n    );\n};\n",
                      "id": "file-1738907938593-ix2v1cyrn",
                      "isIndexer": false,
                      "name": "{{.LowerCaseRouteName}}-slug.desk-structure.ts",
                      "type": "file"
                    },
                    {
                      "_key": "1738908150397-4iudg4xye",
                      "_type": "treeNode",
                      "children": [],
                      "code": "import { groq } from \"next-sanity\";\n\nexport const GET_{{.UpperCaseRouteName}}_BY_SLUG_QUERY = groq`\n  *[_type == \"{{.LowerCaseRouteName}}-slug\" && defined(slug)] | order(_createdAt desc){\n    title,\n    slug,\n    excerpt,\n  }\n`;\n\nexport const GET_ALL_{{.UpperCaseRouteName}}_SLUGS_QUERY = groq`\n  *[_type == \"{{.LowerCaseRouteName}}-slug\" && defined(slug)]{\n    slug\n  }\n`;\n\nexport const GET_{{.UpperCaseRouteName}}_POST_QUERY = groq`\n  *[_type == \"{{.LowerCaseRouteName}}-slug\" && slug.current == $slug][0]{\n    title,\n    slug,\n    _createdAt,\n    _updatedAt,\n  }\n`;\n",
                      "id": "file-1738907938593-u2xq3vq5d",
                      "isIndexer": false,
                      "name": "{{.LowerCaseRouteName}}-slug.route-query.ts",
                      "type": "file"
                    },
                    {
                      "_key": "1738908150397-t05gwnest",
                      "_type": "treeNode",
                      "children": [],
                      "code": "import { defineField, defineType } from \"sanity\";\nimport { FileText } from \"lucide-react\";\n\nexport default defineType({\n  name: \"{{.LowerCaseRouteName}}-slug\",\n  title: \"{{.PascalCaseRouteName}}\",\n  type: \"document\",\n  icon: FileText,\n  groups: [\n    {\n      name: \"content\",\n      title: \"Content\",\n    },\n    {\n      name: \"seo\",\n      title: \"SEO\",\n    },\n    {\n      name: \"settings\",\n      title: \"Settings\",\n    },\n  ],\n  fields: [\n    defineField({\n      name: \"title\",\n      title: \"Title\",\n      type: \"string\",\n      group: \"content\",\n      validation: (Rule) => Rule.required(),\n    }),\n    defineField({\n      name: \"slug\",\n      title: \"Slug\",\n      type: \"slug\",\n      group: \"settings\",\n      options: {\n        source: \"title\",\n        maxLength: 96,\n      },\n      validation: (Rule) => Rule.required(),\n    }),\n    defineField({\n      name: \"excerpt\",\n      title: \"Excerpt\",\n      type: \"text\",\n      group: \"content\",\n    }),\n  ],\n});\n",
                      "id": "file-1738907938593-cxvqda7pq",
                      "isIndexer": false,
                      "name": "{{.LowerCaseRouteName}}-slug.route-schema.ts",
                      "type": "file"
                    },
                    {
                      "_key": "1739451431158-opfxlwg0y",
                      "_type": "treeNode",
                      "children": [],
                      "code": "\"use server\";\n\nimport { sanityFetch } from \"@/sanity/lib/live\";\n\nimport { GET_ALL_{{.UpperCaseRouteName}}_SLUGS_QUERY, GET_{{.UpperCaseRouteName}}_BY_SLUG_QUERY } from \"./{{.LowerCaseRouteName}}-slug.route-query\";\n\n// Fetch a full {{.PascalCaseRouteName}} using its slug\nexport async function fetchSanity{{.PascalCaseRouteName}}BySlug({\n  slug,\n}: {\n  slug: string;\n}): Promise<Sanity.Page> {\n  const { data } = await sanityFetch({\n    query: GET_{{.UpperCaseRouteName}}_BY_SLUG_QUERY,\n    params: { slug },\n  });\n  return data;\n}\n\n// Fetch all {{.PascalCaseRouteName}} slugs for static params generation\nexport async function fetchSanity{{.PascalCaseRouteName}}StaticParams(): Promise<Sanity.Page[]> {\n  const { data } = await sanityFetch({\n    query: GET_ALL_{{.UpperCaseRouteName}}_SLUGS_QUERY,\n    perspective: \"published\",\n    stega: false,\n  });\n  return data;\n}\n\nexport async function fetchSanity{{.PascalCaseRouteName}}s() {\n  const { data } = await sanityFetch({\n    query: GET_ALL_{{.UpperCaseRouteName}}_SLUGS_QUERY,\n  });\n  return data;\n}\n",
                      "id": "file-1739449795743",
                      "isIndexer": false,
                      "name": "{{.LowerCaseRouteName}}-slug.server-actions.ts",
                      "type": "file"
                    }
                  ],
                  "code": "",
                  "id": "folder-1739449608160",
                  "isIndexer": false,
                  "name": "({{.LowerCaseRouteName}}-slug-core-utilities)",
                  "type": "folder"
                },
                {
                  "_key": "1738908150397-pw8or1cfj",
                  "_type": "treeNode",
                  "children": [],
                  "code": "import { notFound } from \"next/navigation\";\n\nimport { generatePageMetadata } from \"@/features/unorganized-utils/metadata\";\nimport PortableTextRenderer from \"@/features/unorganized-components/portable-text-renderer\";\nimport { fetchSanity{{.PascalCaseRouteName}}BySlug, fetchSanity{{.PascalCaseRouteName}}StaticParams } from \"./({{.LowerCaseRouteName}}-slug-core-utilities)/{{.LowerCaseRouteName}}-slug.server-actions\";\n\nexport async function generateStaticParams() {\n  const posts = await fetchSanity{{.PascalCaseRouteName}}StaticParams();\n\n  return posts.map((post) => ({\n    slug: post.slug.current,\n  }));\n}\n\nexport async function generateMetadata(props: {\n  params: Promise<{ slug: string }>;\n}) {\n  const { slug } = await props.params;\n  const post = await fetchSanity{{.PascalCaseRouteName}}BySlug({ slug });\n\n  if (!post) {\n    notFound();\n  }\n\n  return generatePageMetadata({ page: post, slug: `/${{.LowerCaseRouteName}}/${slug}` });\n}\n\nexport default async function {{.PascalCaseRouteName}}(props: {\n  params: Promise<{ slug: string }>;\n}) {\n  const { slug } = await props.params;\n  const post = await fetchSanity{{.PascalCaseRouteName}}BySlug({ slug });\n\n  if (!post) {\n    notFound();\n  }\n  return (\n    <section>\n      <div className=\"container py-16 xl:py-20\">\n        \n      </div>\n    </section>\n  );\n}\n",
                  "id": "file-1738907938593-7ca5p1243",
                  "isIndexer": false,
                  "name": "page.tsx",
                  "type": "file"
                }
              ],
              "code": "",
              "id": "folder-1738907615562",
              "isIndexer": false,
              "name": "[slug]",
              "type": "folder"
            }
          ]
        },
        {
          "_key": "1738915780930-sfvdk48k2",
          "_type": "treeNode",
          "id": "file-1738915358780",
          "name": "all-route-document-schemas.ts",
          "type": "file",
          "code": "// THIS IS AN INDEXER FILE\n\n// START OF VALUE 1\nimport {{.LowerCaseRouteName}}SlugSchema from \"@/app/(main)/{{.LowerCaseRouteName}}/[slug]/({{.LowerCaseRouteName}}-slug-core-utilities)/{{.LowerCaseRouteName}}-slug.route-schema\";\n// END OF VALUE 1\nimport pageSlugSchema from \"@/app/(main)/(root)/[slug]/page-slug.route-schema\";\nimport blogSlugSchema from \"@/app/(main)/blog/[slug]/(blog-slug-core-utilities)/blog-slug.route-schema\";\n// ADD VALUE 1 ABOVE\n\nconst routeDocumentSchemas = {\n\n  // START OF VALUE 2\n  {{.LowerCaseRouteName}}SlugSchema,\n  // END OF VALUE 2\n  pageSlugSchema,\n  blogSlugSchema,\n  // ADD VALUE 2 ABOVE\n};\n\nexport const allRouteDocumentSchemas = Object.values(routeDocumentSchemas);\n\nexport const ROUTE_DOCUMENT_SCHEMA_TYPES = allRouteDocumentSchemas.map((schema) => schema.name);\n",
          "isIndexer": true,
          "children": []
        }
      ]
    },
    {
      "_key": "1739468911084-9ef1drkbs",
      "_type": "filePathGroup",
      "id": "path-1739468804545",
      "path": "sanity/desk-organized-sanity-utilities",
      "nodes": [
        {
          "_key": "1739468911084-b6eupkvov",
          "_type": "treeNode",
          "id": "file-1739468824956",
          "name": "structure.ts",
          "type": "file",
          "code": "// THIS IS AN INDEXER FILE\n\nimport { settingsStructure } from \"@/sanity/desk-organized-sanity-utilities/settings/settings.structure\";\n// START OF VALUE 1\nimport { {{.CamelCaseRouteName}}SlugDeskStructure } from \"@/app/(main)/{{.LowerCaseRouteName}}/[slug]/({{.LowerCaseRouteName}}-slug-core-utilities)/{{.LowerCaseRouteName}}-slug.desk-structure\";\n// END OF VALUE 1\n\n// ADD VALUE 1 ABOVE\n\nexport const structure = (S: any, context: any) =>\n  S.list()\n    .title(\"Content\")\n    .items([\n      settingsStructure(S),\n      S.listItem()\n      .title(\"Pages\")\n      .schemaType(\"page-slug\")\n      .child(\n        S.documentTypeList(\"page-slug\")\n          .title(\"Pages\")\n          .defaultOrdering([{ field: \"_createdAt\", direction: \"desc\" }]) // Default ordering\n      ),\n      // START OF VALUE 2\n      {{.CamelCaseRouteName}}SlugDeskStructure(S),\n      // END OF VALUE 2\n\n      // ADD VALUE 2 ABOVE\n      \n\n    ]\n    );\n",
          "isIndexer": false,
          "children": []
        }
      ]
    }
  ]
}